% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pgx-contrasts.R
\name{pgx.makeAutoContrastsStratified}
\alias{pgx.makeAutoContrastsStratified}
\title{Automatically generate contrasts within strata}
\usage{
pgx.makeAutoContrastsStratified(
  df,
  strata.var,
  mingrp = 3,
  max.level = 99,
  ref = NULL,
  slen = 20,
  fix.degenerate = FALSE,
  skip.hidden = TRUE
)
}
\arguments{
\item{df}{Data frame with sample metadata}

\item{strata.var}{Column name for the stratification variable}

\item{mingrp}{Minimum group size to include}

\item{ref}{Reference level for factors}

\item{slen}{Maximum contrast name length}

\item{fix.degenerate}{Fix degenerate designs?}

\item{skip.hidden}{Skip hidden metadata columns?}
}
\value{
Data frame with automatically generated contrasts
}
\description{
This function automatically generates contrasts for differential analysis from a
data frame of sample metadata, stratified by a grouping variable. It extracts factor
columns within each stratum, generates all pairwise comparisons between groups, and
outputs a clean contrast matrix.
}
\details{
The sample metadata is split by the stratification variable into separate strata.
Categorical variables with at least mingrp groups are expanded into dummy variables
within each stratum. All pairwise comparisons between groups are generated, with
contrast names cleaned and truncated to slen characters.

Degenerate designs are checked for and resolved if fix.degenerate=TRUE.
Metadata columns starting with "." are skipped if skip.hidden=TRUE.

The final output is a data frame with samples in rows, contrast columns, and values
of 0/1/-1 indicating the sample groups being compared within each stratum.
}
